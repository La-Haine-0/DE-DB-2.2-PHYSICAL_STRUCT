# DE-DB-2.2-PHYSICAL_STRUCT
 Задание включает себя следующие пункты :
 1. Разработать физическую структуру БД. 
 Физическая структура должна содержать:
- таблицы;
- связи между таблицами;
- первичные и внешние ключи;
- тип атрибутов сущностей согласно выбранной СУБД;

 Юзать буду PostgreSQL в рамках курса.

 2. И спользуя DDL, написать SQL-запрос создания всех таблиц со связями, первичными и внешними ключами.

# Логика выполнения работы:
 1. Вернемся к заданию разработки логической структуры БД.
 Типы ключей по сущностям:
- Читатели: поле Номер Билета - первичный ключ;
- Книги: поле Шифр книги - первичный ключ;
- Книга-автор: поле ID Автора - внешний ключ к таблице "Авторы", поле Шифр Книги - внешний ключ к таблице "Книги", ID Книга-автор - первичный ключ;
- Авторы: ID_автора - первичный ключ;
- Книги_Авторы: поле Шифр_книги - внешний ключ к таблице "Книги", поле id_автора - внешний ключ к таблице "Авторы", оба этих поля составной первичный ключ таблицы;
- Издательство: поле ID_издательства - первичный ключ;
- Города: поле ID_города - первичный ключ;
- Издательство-Города: поле ID_издательства - внешний ключ к таблице "Издательства", поле ID_города - внешний ключ к таблице "Города", ID Издательство-города - первичный ключ;
- Экземпляр книги: Шифр книги - внешний ключ к таблице "Книги", поле ID_издательства - внешний ключ к таблице "Издательства", ID (экземпляра) книги - первичный ключ;
- Выдача книги: номер читательского билета - внешний ключ к таблице "Читатели", ID Выдачи экземпляра - первичный ключ;
2. Пропишем SQL-запросы на создание и укажем первичные и внешние ключи ,связывающие наши таблицы.
# Справочный матриал:
 Чтобы установить связь между таблицами, после ключевого слова REFERENCES указывается имя связанной таблицы и далее в скобках имя столбца из этой таблицы, на который будет указывать внешний ключ. После выражения REFERENCES может идти выражение ON DELETE и ON UPDATE, которые уточняют поведение при удалении или обновлении данных.

## ON DELETE и ON UPDATE
С помощью выражений ON DELETE и ON UPDATE можно установить действия, которые выполняются соответственно при удалении и изменении связанной строки из главной таблицы. Для установки подобного действия можно использовать следующие опции:
- CASCADE: автоматически удаляет или изменяет строки из зависимой таблицы при удалении или изменении связанных строк в главной таблице.
- RESTRICT: предотвращает какие-либо действия в зависимой таблице при удалении или изменении связанных строк в главной таблице. То есть фактически какие-либо действия отсутствуют.
- NO ACTION: действие по умолчанию, предотвращает какие-либо действия в зависимой таблице при удалении или изменении связанных строк в главной таблице. И генерирует ошибку. В отличие от RESTRICT выполняет отложенную проверку на связанность между таблицами.
- SET NULL: при удалении связанной строки из главной таблицы устанавливает для столбца внешнего ключа значение NULL.
- SET DEFAULT: при удалении связанной строки из главной таблицы устанавливает для столбца внешнего ключа значение по умолчанию, которое задается с помощью атрибуты DEFAULT. Если для столбца не задано значение по умолчанию, то в качестве него применяется значение NULL.
## CASCADE
- По умолчанию, если на строку из главной таблицы по внешнему ключу ссылается какая-либо строка из зависимой таблицы, то мы не сможем удалить эту строку из главной таблицы. Вначале нам необходимо будет удалить все связанные строки из зависимой таблицы. И если при удалении строки из главной таблицы необходимо, чтобы были удалены все связанные строки из зависимой таблицы, то применяется каскадное удаление, то есть опция CASCADE.
- Аналогично работает выражение ON UPDATE CASCADE. При изменении значения первичного ключа автоматически изменится значение связанного с ним внешнего ключа. Но так как первичные ключи, как правило, изменяются очень редко, да и с принципе не рекомендуется использовать в качестве первичных ключей столбцы с изменяемыми значениями, то на практике выражение ON UPDATE используется редко.
